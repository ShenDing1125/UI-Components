{"version":3,"file":"Menu.stories-dde90ef1.js","sources":["../../src/components/Menu/menu.tsx","../../src/components/Menu/subMenu.tsx","../../src/components/Menu/menuItem.tsx","../../src/components/Menu/index.tsx"],"sourcesContent":["import classNames from 'classnames';\nimport React, { CSSProperties, FC, ReactNode, createContext, useState } from 'react';\nimport reserveChildrenType from '../../utils/reserveChildrenType';\nimport { MenuItemProps } from './menuItem';\n\ntype MenuMode = 'horizontal' | 'vertical';\ntype SelectCallback = (selectedIndex: string) => void;\nexport interface MenuProps {\n    defaultIndex?: string;\n    className?: string;\n    mode?: MenuMode;\n    style?: CSSProperties;\n    onSelect?: SelectCallback;\n    defaultOpenSubMenus?: string[];\n    children?: ReactNode;\n}\ninterface IMenuContext {\n    index: string;\n    onSelect?: SelectCallback;\n    mode?: MenuMode;\n    defaultOpenSubMenus?: string[];\n    isUseAlone: boolean;\n}\n\nexport const MenuContext = createContext<IMenuContext>({ index: '0', isUseAlone: true });\n\nexport const Menu: FC<MenuProps> = (props) => {\n    const { className, mode, style, children, defaultIndex, onSelect, defaultOpenSubMenus } = props;\n    const _children: ReactNode = reserveChildrenType(children, 'object', []);\n    const [currentActive, setActive] = useState(defaultIndex);\n    const classes = classNames('sd-menu', className, {\n        'menu-vertical': mode === 'vertical',\n        'menu-horizontal': mode !== 'vertical'\n    });\n    const handleClick = (index: string) => {\n        setActive(index);\n        onSelect && onSelect(index);\n    };\n    const passedContext: IMenuContext = {\n        index: currentActive ? currentActive : '0',\n        onSelect: handleClick,\n        mode,\n        defaultOpenSubMenus,\n        isUseAlone: false\n    };\n    const renderChildren = () => {\n        return React.Children.map(_children, (child, index) => {\n            const childElement = child as React.FunctionComponentElement<MenuItemProps>;\n            const { displayName } = childElement.type;\n            if (displayName === 'MenuItem' || displayName === 'SubMenu') {\n                return React.cloneElement(childElement, {\n                    index: index.toString()\n                });\n            } else {\n                console.error('Warring: Menu has a child which is not a MenuItem or SubMenu component');\n            }\n        });\n    };\n    return (\n        <>\n            <ul className={classes} style={style}>\n                <MenuContext.Provider value={passedContext}>{renderChildren()}</MenuContext.Provider>\n            </ul>\n        </>\n        // <ul className={classes} style={style} data-testId=\"test-menu\">\n        //     <MenuContext.Provider value={passedContext}>{renderChildren()}</MenuContext.Provider>\n        // </ul>\n    );\n};\n\nMenu.defaultProps = {\n    defaultIndex: '0',\n    mode: 'horizontal',\n    defaultOpenSubMenus: []\n};\n\nexport default Menu;\n","import classNames from 'classnames';\nimport React, { FC, FunctionComponentElement, ReactNode, useContext, useState } from 'react';\nimport reserveChildrenType from '../../utils/reserveChildrenType';\nimport { TransIcon } from '../Icon';\nimport Transition from '../Transition';\nimport { MenuContext } from './menu';\nimport { MenuItemProps } from './menuItem';\n\nexport interface SubMenuProps {\n    index?: string;\n    title?: string;\n    className?: string;\n    children?: ReactNode;\n}\n\nexport const SubMenu: FC<SubMenuProps> = (props) => {\n    const { index, title, className, children } = props;\n    const _children: ReactNode = reserveChildrenType(children, 'object', []);\n    const context = useContext(MenuContext);\n    const openSubMenus = context.defaultOpenSubMenus as Array<String>;\n    const isOpen = index && context.mode === 'vertical' ? openSubMenus.includes(index) : false;\n    const [menuOpen, setOpen] = useState(isOpen);\n    const classes = classNames('menu-item sub-menu', className, {\n        'is-active': context.index === index,\n        'is-opened': menuOpen,\n        'is-vertical': context.mode === 'vertical'\n    });\n    const handleClick = (e: React.MouseEvent) => {\n        e.preventDefault();\n        setOpen(!menuOpen);\n    };\n    let timer: any;\n    const handleMouse = (e: React.MouseEvent, toggle: boolean) => {\n        clearTimeout(timer);\n        e.preventDefault();\n        timer = setTimeout(() => {\n            setOpen(toggle);\n        }, 300);\n    };\n    const clickEvents =\n        context.mode === 'vertical'\n            ? {\n                  onClick: handleClick\n              }\n            : {};\n    const hoverEvents =\n        context.mode !== 'vertical'\n            ? {\n                  onMouseEnter: (e: React.MouseEvent) => {\n                      handleMouse(e, true);\n                  },\n                  onMouseLeave: (e: React.MouseEvent) => {\n                      handleMouse(e, false);\n                  }\n              }\n            : {};\n    const renderChildren = () => {\n        const childrenComponent = React.Children.map(_children, (child, i) => {\n            const childElement = child as FunctionComponentElement<MenuItemProps>;\n            if (childElement.type.displayName === 'MenuItem') {\n                return React.cloneElement(childElement, {\n                    index: `${index}-${i}`\n                });\n            } else {\n                console.error('Warning: SubMenu has a child which is not a MenuItem component');\n            }\n        });\n        return (\n            <>\n                <Transition in={menuOpen} timeout={300} animation=\"scale-in-top\">\n                    <ul className={'sub-menu-container'}>{childrenComponent}</ul>\n                </Transition>\n            </>\n        );\n    };\n\n    const renderSubMenu = () => {\n        if (!context.isUseAlone) {\n            return (\n                <>\n                    <li key={index} className={classes} {...hoverEvents}>\n                        <div className=\"sub-menu-title\" {...clickEvents}>\n                            {title}\n                            <TransIcon icon=\"angle-down\" className=\"arrow-icon\" size=\"sm\" />\n                        </div>\n                        {renderChildren()}\n                    </li>\n                </>\n            );\n        } else {\n            console.error('Warring: SubMenu can not be used alone');\n        }\n    };\n    return <>{renderSubMenu()}</>;\n};\n\nSubMenu.defaultProps = {\n    title: 'Title'\n};\n\nSubMenu.displayName = 'SubMenu';\nexport default SubMenu;\n","import classNames from 'classnames';\nimport React, { CSSProperties, FC, ReactNode, useContext } from 'react';\nimport { MenuContext } from './menu';\n\nexport interface MenuItemProps {\n    index?: string;\n    disabled?: boolean;\n    className?: string;\n    style?: CSSProperties;\n    children?: ReactNode;\n}\n\nconst MenuItem: FC<MenuItemProps> = (props) => {\n    const { index, disabled, className, style, children } = props;\n    const context = useContext(MenuContext);\n    const classes = classNames('menu-item', className, {\n        'is-disabled': disabled,\n        'is-active': context.index === index\n    });\n    const renderChildren = () => {\n        return React.Children.map(children, (child) => {\n            if (typeof child === 'string') {\n                return (\n                    <>\n                        {classes.includes('is-disabled') ? (\n                            <div className=\"cursor-default\">\n                                <li className={classes} style={style} onClick={handleClick}>\n                                    {child}\n                                </li>\n                            </div>\n                        ) : (\n                            <li className={classes} style={style} onClick={handleClick}>\n                                {child}\n                            </li>\n                        )}\n                    </>\n                );\n            } else {\n                console.error('Warring: The type of MenuItem is not string');\n            }\n        });\n    };\n\n    const handleClick = () => {\n        if (context.onSelect && !disabled && typeof index === 'string') {\n            context.onSelect(index);\n        }\n    };\n\n    const renderMenuItem = () => {\n        if (!context.isUseAlone) {\n            return <>{renderChildren()}</>;\n        } else {\n            console.error('Warring: MenuItem can not be used alone');\n        }\n    };\n    return <>{renderMenuItem()}</>;\n};\n\nMenuItem.displayName = 'MenuItem';\nexport default MenuItem;\n","import { FC } from 'react';\nimport Menu, { MenuProps } from './menu';\nimport SubMenu, { SubMenuProps } from './subMenu';\nimport MenuItem, { MenuItemProps } from './menuItem';\n\nexport type IComponent = FC<MenuProps> & {\n    Item: FC<MenuItemProps>;\n    SubMenu: FC<SubMenuProps>;\n};\n\nexport const TransMenu = Menu as IComponent;\n\nTransMenu.Item = MenuItem;\nTransMenu.SubMenu = SubMenu;\n"],"names":["MenuContext","createContext","Menu","props","className","mode","style","children","defaultIndex","onSelect","defaultOpenSubMenus","_children","reserveChildrenType","currentActive","setActive","useState","classes","classNames","passedContext","index","renderChildren","React","child","childElement","displayName","jsx","Fragment","SubMenu","title","context","useContext","openSubMenus","isOpen","menuOpen","setOpen","handleClick","e","timer","handleMouse","toggle","clickEvents","hoverEvents","childrenComponent","i","Transition","renderSubMenu","jsxs","TransIcon","MenuItem","disabled","renderMenuItem","TransMenu"],"mappings":"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"}